{"version":3,"file":"sport.js","sources":["pages/sport/sport.vue","../../../hbuilderX/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc3BvcnQvc3BvcnQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"pd20 column gap\">\r\n    <view class=\"card blackCard\">\r\n      <view class=\"fs36\">今日消耗热量</view>\r\n      <view class=\"fs60 fwb\">{{ total }} kcal</view>\r\n    </view>\r\n    <view class=\"card\">\r\n      <view class=\"fs32 fwb\">记录今日运动</view>\r\n      <input class=\"input\" v-model=\"sport\" placeholder=\"运动项目\" />\r\n      <input\r\n        class=\"input\"\r\n        v-model.number=\"calories\"\r\n        type=\"number\"\r\n        placeholder=\"热量(kcal)\"\r\n      />\r\n      <button class=\"mgt20\" @click=\"addSport\">添加记录</button>\r\n    </view>\r\n    <view class=\"card\" v-for=\"item in list\" :key=\"item._id\">\r\n      <view class=\"fs32 fwb\">{{ item.sport }}</view>\r\n      <view class=\"mgt10 c6\">{{ item.calories }} kcal</view>\r\n      <view class=\"c9 fs24\">{{ item.date }}</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n<script setup>\r\nimport { ref, computed } from \"vue\";\r\nimport { onShow } from \"@dcloudio/uni-app\";\r\nimport { sportService } from \"../../services/api.js\";\r\n\r\nconst sport = ref(\"\");\r\nconst calories = ref(0);\r\nconst list = ref([]);\r\n\r\nconst total = computed(() =>\r\n  list.value.reduce((sum, item) => sum + Number(item.calories || 0), 0)\r\n);\r\n\r\nconst load = async () => {\r\n  const today = new Date().toISOString().slice(0, 10);\r\n  try {\r\n    const res = await sportService.dailySport(today);\r\n    list.value = res.records || [];\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nconst addSport = async () => {\r\n  if (!sport.value || !calories.value) {\r\n    uni.showToast({ title: \"请填写完整\", icon: \"none\" });\r\n    return;\r\n  }\r\n  try {\r\n    await sportService.addSport({\r\n      sport: sport.value,\r\n      calories: Number(calories.value),\r\n      date: new Date().toISOString().slice(0, 10),\r\n    });\r\n    sport.value = \"\";\r\n    calories.value = 0;\r\n    await load();\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nonShow(load);\r\n</script>\r\n<style scoped>\r\n.column.gap > .card + .card {\r\n  margin-top: 20rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/Work/unicode/health_app/pages/sport/sport.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","sportService","uni","onShow"],"mappings":";;;;;;AA6BA,UAAM,QAAQA,cAAAA,IAAI,EAAE;AACpB,UAAM,WAAWA,cAAAA,IAAI,CAAC;AACtB,UAAM,OAAOA,cAAAA,IAAI,CAAA,CAAE;AAEnB,UAAM,QAAQC,cAAAA;AAAAA,MAAS,MACrB,KAAK,MAAM,OAAO,CAAC,KAAK,SAAS,MAAM,OAAO,KAAK,YAAY,CAAC,GAAG,CAAC;AAAA,IACtE;AAEA,UAAM,OAAO,YAAY;AACvB,YAAM,SAAQ,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAClD,UAAI;AACF,cAAM,MAAM,MAAMC,aAAAA,aAAa,WAAW,KAAK;AAC/C,aAAK,QAAQ,IAAI,WAAW,CAAA;AAAA,MAC7B,SAAQ,GAAG;AACVC,sBAAAA,oDAAc,CAAC;AAAA,MAChB;AAAA,IACH;AAEA,UAAM,WAAW,YAAY;AAC3B,UAAI,CAAC,MAAM,SAAS,CAAC,SAAS,OAAO;AACnCA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C;AAAA,MACD;AACD,UAAI;AACF,cAAMD,aAAAA,aAAa,SAAS;AAAA,UAC1B,OAAO,MAAM;AAAA,UACb,UAAU,OAAO,SAAS,KAAK;AAAA,UAC/B,OAAM,oBAAI,QAAO,YAAa,EAAC,MAAM,GAAG,EAAE;AAAA,QAChD,CAAK;AACD,cAAM,QAAQ;AACd,iBAAS,QAAQ;AACjB,cAAM,KAAI;AAAA,MACX,SAAQ,GAAG;AACVC,sBAAAA,oDAAc,CAAC;AAAA,MAChB;AAAA,IACH;AAEAC,kBAAM,OAAC,IAAI;;;;;;;;;;;;;;;;;;;;;;;;ACjEX,GAAG,WAAW,eAAe;"}